<!doctype html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>주마담</title><style>body,html{margin:0;padding:0;height:100%;font-family:'Nanum Gothic',Arial,sans-serif;background-color:#f0f0f0}body{background-size:cover;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column}.header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background-color:rgba(255,255,255,.9);box-shadow:0 2px 5px rgba(0,0,0,.1)}.logo{max-width:150px;max-height:60px;cursor:pointer}.menu{display:flex;gap:20px}.menu-item{color:#333;text-decoration:none;font-size:16px;font-weight:700;padding:5px 10px;border-radius:5px;transition:background-color .3s}.menu-item:hover{background-color:#e0e0e0}.main-container{flex-grow:1;display:flex;justify-content:center;align-items:center;padding:20px}.content-container{background-color:rgba(255,255,255,.25);width:100%;max-width:none;padding:30px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}.container{display:flex;flex-direction:column;align-items:center}.character-container{width:100%;max-width:300px;margin-bottom:20px}.character-image{width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:10px}.content{width:100%;max-width:500px;display:flex;flex-direction:column;align-items:center}.speech-bubble{position:relative;background:#fff;border-radius:15px;padding:20px;margin-bottom:20px;box-shadow:0 2px 5px rgba(0,0,0,.1);font-size:16px;line-height:1.5;text-align:center;width:100%}.speech-bubble:after{content:'';position:absolute;top:0;left:50%;width:0;height:0;border:15px solid transparent;border-bottom-color:#fff;border-top:0;margin-left:-15px;margin-top:-15px}.choices{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;width:100%}.choice-button,.submit-button{padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .1s;font-size:16px}.choice-button:hover,.submit-button:hover{background-color:#45a049;transform:scale(1.05)}.input-field{padding:10px;width:100%;max-width:300px;background-color:#fff;border:1px solid #ccc;border-radius:5px;font-size:16px;margin-bottom:10px}.fortune-result,.mbti-result{background-color:#fff;padding:20px;border-radius:10px;margin-top:20px;white-space:pre-wrap;line-height:1.6;font-size:16px;max-width:100%;overflow-wrap:break-word;box-shadow:0 2px 5px rgba(0,0,0,.1)}.mbti-result{background-color:#f8f9fa;border-radius:10px;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-top:15px;text-align:center;max-width:300px;width:90%;margin-left:auto;margin-right:auto}.mbti-result-text{font-size:16px;line-height:1.5;color:#333;margin-bottom:8px;white-space:pre-wrap;text-align:left}.mbti-result p{font-size:14px;line-height:1.3;color:#333;margin-bottom:8px}@media (max-width:600px){.header{flex-direction:column;align-items:center}.menu{margin-top:15px;flex-wrap:wrap;justify-content:center}.logo{max-width:120px;max-height:48px}.menu-item{font-size:14px;padding:5px 8px}.content-container{padding:20px}.fortune-result,.mbti-result,.speech-bubble{font-size:14px;padding:15px}.choice-button,.submit-button{font-size:14px;padding:8px 16px}.input-field{font-size:14px;padding:8px}}</style><script defer="defer" src="/static/js/main.31d6cfe0.js"></script></head><body><div class="header"><img id="logo" class="logo" src="" alt="주마담 로고"><div class="menu"><a class="menu-item" onclick="showHome()">홈</a> <a class="menu-item" onclick="showDatingApplication()">소개팅 신청하기</a> <a class="menu-item" onclick="showFortune()">사주&운세</a> <a class="menu-item" onclick="showMBTI()">MBTI 테스트</a></div></div><div class="main-container"><div id="home-content" class="content-container" style="display:none"><div class="container"><div class="character-container"><img id="home-character-image" class="character-image" alt="홈 캐릭터"></div><div class="content"><div id="home-speech-bubble" class="speech-bubble"></div></div></div></div><div id="dating-content" class="content-container" style="display:none"><div class="container"><div class="character-container"><img id="character-image" class="character-image" alt="주마담 캐릭터"></div><div class="content"><div id="question" class="speech-bubble"></div><div id="choices" class="choices"></div></div></div></div><div id="fortune-content" class="content-container" style="display:none"><div class="container"><div class="character-container"><img id="fortune-character-image" class="character-image" alt="주마담 캐릭터"></div><div class="content"><div id="fortune-question" class="speech-bubble"></div><div id="fortune-choices" class="choices"></div></div></div></div><div id="mbti-content" class="content-container" style="display:none"><div class="container"><div class="character-container"><img id="mbti-character-image" class="character-image" alt="주마담 캐릭터"></div><div class="content"><div id="mbti-question" class="speech-bubble"></div><div id="mbti-choices" class="choices"></div></div></div></div></div><script>let questions=[],currentQuestion=0;const currentAnswers=[];let characterImages={},fortuneQuestions=[],currentFortuneQuestion=0;const fortuneAnswers=[];let mbtiQuestions=[],currentMBTIQuestion=0;const mbtiAnswers=[],choices=[["예"],[],["서울","인천","대전","세종","광주","대구","울산","부산","경기","강원","충북","충남","전남","전북","경북","경남","제주"],[],["남자","여자"],[],["연상","연하","동갑"]];function showHome(){document.getElementById("home-content").style.display="block",document.getElementById("dating-content").style.display="none",document.getElementById("fortune-content").style.display="none",document.getElementById("mbti-content").style.display="none",loadHomeDesign()}function showDatingApplication(){document.getElementById("home-content").style.display="none",document.getElementById("dating-content").style.display="block",document.getElementById("fortune-content").style.display="none",document.getElementById("mbti-content").style.display="none",fetchQuestions()}function showFortune(){document.getElementById("home-content").style.display="none",document.getElementById("dating-content").style.display="none",document.getElementById("fortune-content").style.display="block",document.getElementById("mbti-content").style.display="none",fetchFortuneQuestions()}function showMBTI(){document.getElementById("home-content").style.display="none",document.getElementById("dating-content").style.display="none",document.getElementById("fortune-content").style.display="none",document.getElementById("mbti-content").style.display="block",fetchMBTIQuestions()}function loadHomeDesign(){fetch("/getHomeDesign").then((e=>e.json())).then((e=>{e.characterImage&&(document.getElementById("home-character-image").src=`/uploads/${e.characterImage}`),e.speechBubbleText&&(document.getElementById("home-speech-bubble").innerText=e.speechBubbleText)})).catch((e=>{console.error("홈 디자인 정보를 가져오는 데 실패했습니다:",e)}))}function fetchQuestions(){return fetch("/questions").then((e=>e.json())).then((e=>{questions=e,showQuestion()})).catch((e=>{console.error("질문을 불러오는 데 실패했습니다:",e),alert("질문을 불러오는 데 실패했습니다. 페이지를 새로고침해 주세요.")}))}function fetchFortuneQuestions(){return fetch("/fortune-questions").then((e=>e.json())).then((e=>{fortuneQuestions=e,showFortuneQuestion()})).catch((e=>{console.error("사주&운세 질문을 불러오는 데 실패했습니다:",e),alert("질문을 불러오는 데 실패했습니다. 페이지를 새로고침해 주세요.")}))}function fetchMBTIQuestions(){return fetch("/mbti-questions").then((e=>e.json())).then((e=>{mbtiQuestions=e,showMBTIQuestion()})).catch((e=>{console.error("MBTI 질문을 불러오는 데 실패했습니다:",e),alert("질문을 불러오는 데 실패했습니다. 페이지를 새로고침해 주세요.")}))}function showQuestion(){document.getElementById("question").innerText=questions[currentQuestion];const e=document.getElementById("choices");if(e.innerHTML="",choices[currentQuestion].length>0)choices[currentQuestion].forEach((t=>{const n=document.createElement("button");n.className="choice-button",n.innerText=t,n.onclick=()=>handleAnswer(t),e.appendChild(n)}));else{const t=document.createElement("input");t.className="input-field",1===currentQuestion?(t.type="text",t.maxLength=4,t.pattern="^[가-힣]{2,4}$",t.title="이름은 최소 두글자부터 최대 네글자까지 한글로만 입력이 가능해요"):3===currentQuestion?(t.type="text",t.maxLength=2,t.pattern="^(05|04|03|02|01|00|99|98|97|96|95|94|93|92|91|90|89|88|87|86|85|84|83|82|81|80)$",t.title="아쉽지만 05년생부터 80년생까지만 신청이 가능해요 :)"):5===currentQuestion&&(t.type="text",t.maxLength=11,t.pattern="^010\\d{8}$",t.title="연락처는 010으로 시작하는 11자리까지만 입력이 가능해요");const n=document.createElement("button");n.className="submit-button",n.innerText="제출",n.onclick=()=>handleAnswer(t.value),e.appendChild(t),e.appendChild(n)}const t=document.getElementById("character-image");characterImages[currentQuestion+1]?(t.src=`/uploads/${characterImages[currentQuestion+1]}`,t.style.display="block"):t.style.display="none"}function showFortuneQuestion(){document.getElementById("fortune-question").innerText=fortuneQuestions[currentFortuneQuestion];const e=document.getElementById("fortune-choices");switch(e.innerHTML="",currentFortuneQuestion){case 0:createButtonChoice(["예"],e,handleFortuneAnswer);break;case 1:createInputChoice("text","이름을 입력해주세요",e,handleFortuneAnswer,"^[가-힣]{2,4}$","이름은 최소 두글자부터 최대 네글자까지 한글로만 입력이 가능해요");break;case 2:createButtonChoice(["남자에요","여자에요"],e,handleFortuneAnswer);break;case 3:const t=["출생년도(선택)"];for(let e=2024;e>=1930;e--)t.push(e.toString());createSelectChoice(t,e,handleFortuneAnswer);break;case 4:createMonthDayChoice(e,handleFortuneAnswer);break;case 5:createButtonChoice(["자시 (23:31 ~ 01:30)","축시 (01:31 ~ 03:30)","인시 (03:31 ~ 05:30)","묘시 (05:31 ~ 07:30)","진시 (07:31 ~ 09:30)","사시 (09:31 ~ 11:30)","오시 (11:31 ~ 13:30)","미시 (13:31 ~ 15:30)","신시 (15:31 ~ 17:30)","유시 (17:31 ~ 19:30)","술시 (19:31 ~ 21:30)","해시 (21:31 ~ 23:30)","잘 모르겠어요"],e,handleFortuneAnswer)}const t=document.getElementById("fortune-character-image");characterImages[currentFortuneQuestion+1]?(t.src=`/uploads/${characterImages[currentFortuneQuestion+1]}`,t.style.display="block"):t.style.display="none"}function showMBTIQuestion(){document.getElementById("mbti-question").innerText=mbtiQuestions[currentMBTIQuestion].question;const e=document.getElementById("mbti-choices");e.innerHTML="",createButtonChoice(mbtiQuestions[currentMBTIQuestion].choices,e,handleMBTIAnswer);const t=document.getElementById("mbti-character-image");characterImages[currentMBTIQuestion+1]?(t.src=`/uploads/${characterImages[currentMBTIQuestion+1]}`,t.style.display="block"):t.style.display="none"}function createButtonChoice(e,t,n){e.forEach((e=>{const o=document.createElement("button");o.className="choice-button",o.innerText=e,o.onclick=()=>n(e),t.appendChild(o)}))}function createInputChoice(e,t,n,o,s,c){const r=document.createElement("input");r.type=e,r.placeholder=t,r.className="input-field",s&&(r.pattern=s),c&&(r.title=c),n.appendChild(r);const i=document.createElement("button");i.className="submit-button",i.innerText="제출",i.onclick=()=>{r.checkValidity()?o(r.value):alert(r.title)},n.appendChild(i)}function createSelectChoice(e,t,n){const o=document.createElement("select");o.className="input-field",e.forEach((e=>{const t=document.createElement("option");t.value=e,t.text=e,o.appendChild(t)})),t.appendChild(o);const s=document.createElement("button");s.className="submit-button",s.innerText="제출",s.onclick=()=>{"출생년도(선택)"!==o.value?n(o.value):alert("출생년도를 선택해주세요.")},t.appendChild(s)}function createMonthDayChoice(e,t){const n=document.createElement("select");n.className="input-field",n.innerHTML="<option value=''>월(선택)</option>";for(let e=1;e<=12;e++){const t=document.createElement("option");t.value=e,t.text=`${e}월`,n.appendChild(t)}e.appendChild(n);const o=document.createElement("select");o.className="input-field",o.innerHTML="<option value=''>일(선택)</option>";for(let e=1;e<=31;e++){const t=document.createElement("option");t.value=e,t.text=`${e}일`,o.appendChild(t)}e.appendChild(o);const s=document.createElement("button");s.className="submit-button",s.innerText="제출",s.onclick=()=>{n.value&&o.value?t(`${n.value}월 ${o.value}일`):alert("월과 일을 모두 선택해주세요.")},e.appendChild(s)}function handleAnswer(e){if(1===currentQuestion){if(!/^[가-힣]{2,4}$/.test(e))return void alert("이름은 최소 두글자부터 최대 네글자까지 한글로만 입력이 가능해요")}else if(3===currentQuestion){if(!["05","04","03","02","01","00","99","98","97","96","95","94","93","92","91","90","89","88","87","86","85","84","83","82","81","80"].includes(e))return void alert("아쉽지만 05년생부터 80년생까지만 신청이 가능해요 :)")}else if(5===currentQuestion&&!/^010\d{8}$/.test(e))return void alert("연락처는 010으로 시작하는 11자리까지만 입력이 가능해요");currentAnswers[currentQuestion]=e,currentQuestion++,currentQuestion<questions.length?showQuestion():submitAnswers()}function handleFortuneAnswer(e){1!==currentFortuneQuestion||/^[가-힣]{2,4}$/.test(e)?(fortuneAnswers[currentFortuneQuestion]=e,currentFortuneQuestion++,currentFortuneQuestion<fortuneQuestions.length?showFortuneQuestion():submitFortuneAnswers()):alert("이름은 최소 두글자부터 최대 네글자까지 한글로만 입력이 가능해요")}function handleMBTIAnswer(e){mbtiAnswers.push(e),currentMBTIQuestion++,currentMBTIQuestion<mbtiQuestions.length?showMBTIQuestion():submitMBTIAnswers()}function submitAnswers(){fetch("/saveAnswers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(currentAnswers)}).then((e=>{e.ok?showCompletionMessage():e.json().then((e=>{alert("오류가 발생했습니다: "+e.errors.map((e=>e.msg)).join(", "))}))}))}function submitFortuneAnswers(){fetch("/saveFortuneAnswers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fortuneAnswers)}).then((e=>{if(e.ok)return e.json();throw new Error("서버 응답이 실패했습니다.")})).then((e=>{if(!e.fortuneResult)throw new Error("사주 결과가 없습니다.");showFortuneCompletionMessage(e.fortuneResult)})).catch((e=>{console.error("Error:",e),alert("오류가 발생했습니다: "+e.message)}))}function submitMBTIAnswers(){fetch("/saveMBTIAnswers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(mbtiAnswers)}).then((e=>{if(e.ok)return e.json();throw new Error("서버 응답이 실패했습니다.")})).then((e=>{if(!e.mbtiResult)throw new Error("MBTI 결과가 없습니다.");showMBTICompletionMessage(e.mbtiResult)})).catch((e=>{console.error("Error:",e),alert("오류가 발생했습니다: "+e.message)}))}function showCompletionMessage(){document.getElementById("question").innerText="오케이~ 평일에 매니저를 통해 연락줄테니까~조금만 기다려줘 :)";document.getElementById("choices").innerHTML=""}function showFortuneCompletionMessage(e){document.getElementById("fortune-question").style.display="none";const t=document.getElementById("fortune-choices");t.innerHTML="";const n=document.createElement("div");n.className="fortune-result",n.style.whiteSpace="pre-wrap",n.textContent=e,t.appendChild(n);const o=document.createElement("div");o.className="speech-bubble",o.innerText="우리 친구 사주와 어울리는 사람과 소개팅해보는 건 어때?",t.appendChild(o);const s=document.createElement("button");s.className="choice-button",s.innerText="소개팅 신청 한번 해볼게요!",s.onclick=startDatingApplication,t.appendChild(s)}function showMBTICompletionMessage(e){document.getElementById("mbti-question").innerText="자~ 친구의 MBTI 결과가 나왔어! 어떤 유형일지 궁금하지?";const t=document.getElementById("mbti-choices");t.innerHTML="";const n=document.createElement("div");n.className="mbti-result";let o=`친구의 MBTI는 ${e.type}야~ 이 타입은 ${e.description}\n\n`;o+=`친구와 비슷한 유형의 유명한 인물은 ${e.famousPeople.join(", ")}같은 사람들이야~`,n.textContent=o,t.appendChild(n);const s=document.createElement("div");s.className="speech-bubble",s.innerText="우리 친구 사주와 어울리는 사람과 소개팅해보는 건 어때?",t.appendChild(s);const c=document.createElement("button");c.className="choice-button",c.innerText="소개팅 신청 한번 해볼게요!",c.onclick=startDatingApplication,t.appendChild(c)}function startDatingApplication(){currentQuestion=1,showDatingApplication()}function handleRegionSelection(e){document.getElementById("question").innerText="오호~마지막으로 연락처만 남겨줘~상대방 찾아서 카카오톡으로 연락줄게~";const t=document.getElementById("choices");t.innerHTML="";const n=document.createElement("input");n.type="tel",n.className="input-field",n.placeholder="010으로 시작하는 11자리 번호",n.pattern="^010\\d{8}$",t.appendChild(n);const o=document.createElement("button");o.className="submit-button",o.innerText="제출",o.onclick=()=>submitDatingApplication(e,n.value),t.appendChild(o)}function submitDatingApplication(e,t){if(!/^010\d{8}$/.test(t))return void alert("연락처는 010으로 시작하는 11자리까지만 입력이 가능해요");const n={name:currentAnswers[1],gender:currentAnswers[4],region:e,birthYear:currentAnswers[3],phone:t,timestamp:(new Date).toISOString()};fetch("/saveDatingApplication",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("서버 응답이 실패했습니다.");showFinalMessage()})).catch((e=>{console.error("Error:",e),alert("오류가 발생했습니다: "+e.message)}))}function showFinalMessage(){document.getElementById("question").innerText="오케이~연락줄게~";document.getElementById("choices").innerHTML=""}fetch("/getDesign").then((e=>e.json())).then((e=>{e.backgroundImage&&(document.body.style.backgroundImage=`url(/uploads/${e.backgroundImage})`),e.font&&(document.body.style.fontFamily=e.font),e.textColor&&(document.querySelector(".content-container").style.color=e.textColor),e.logoImage&&(document.getElementById("logo").src=`/uploads/${e.logoImage}`),e.characterImages&&(characterImages=e.characterImages)})).catch((e=>{console.error("디자인 정보를 가져오는 데 실패했습니다:",e)})),document.getElementById("logo").onclick=showHome,showHome()</script></body></html>